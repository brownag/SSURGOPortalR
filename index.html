<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides methods for downloading and interacting with the SSURGO Portal Python tools. ">
<title>Download and Interact with the SSURGO Portal Tools for Building and Editing U.S. Soil Survey Databases • SSURGOPortal</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Download and Interact with the SSURGO Portal Tools for Building and Editing U.S. Soil Survey Databases">
<meta property="og:description" content="Provides methods for downloading and interacting with the SSURGO Portal Python tools. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">SSURGOPortal</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/brownag/SSURGOPortalR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ssurgoportal">SSURGOPortal<a class="anchor" aria-label="anchor" href="#ssurgoportal"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of SSURGOPortal is to provide a simple R interface to the ‘SSURGO Portal’ Python tools. Providing an R wrapper around the SSURGO Portal API allows users to automate many of the operations they might normally achieve through the graphical user interface.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of {SSURGOPortal} like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"brownag/SSURGOPortalR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is example shows how to install the .PYZ file to a standard location:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://humus.rocks/SSURGOPortalR/">SSURGOPortal</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/install_ssurgo_portal.html">install_ssurgo_portal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The above installation routine places the SSURGO Portal file in a platform-specific folder: <code>ssurgo_portal_dir("data")</code></p>
<p>To verify everything is set up and working, we can send the <code>"getstatus"</code> command, like so:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ssurgo_portal.html">ssurgo_portal</a></span><span class="op">(</span><span class="st">"getstatus"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $status</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $message</span></span>
<span><span class="co">#&gt; [1] "It\"s alive! runmode=RunMode.DATA_LOADER, isPyz=True, __file__=C:\\Users\\Andrew.G.Brown\\AppData\\Roaming\\R\\data\\R\\SSURGOPortal\\SSURGOPortal.pyz\\dlcore\\dlutilities.py, currentPath=C:\\Users\\Andrew.G.Brown\\AppData\\Roaming\\R\\data\\R\\SSURGOPortal"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $elapsedseconds</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>See the documentation for <code><a href="reference/ssurgo_portal.html">ssurgo_portal()</a></code> (<code><a href="reference/ssurgo_portal.html">?ssurgo_portal</a></code>) for other available commands and more examples.</p>
<p>In general, a command is structured as JSON with a specific request name and various other parameters. This JSON string is passed via the terminal to the .pyz file and Python interpreter.</p>
<p>We can inspect the commands that are generated using <code>command_only=TRUE</code></p>
<p>For example, here is a sample <code>"copytemplate"</code> request to create a new GeoPackage database called <code>"test.gpkg"</code> from a template:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ssurgo_portal.html">ssurgo_portal</a></span><span class="op">(</span><span class="st">"copytemplate"</span>, </span>
<span>              templatename <span class="op">=</span> <span class="st">"GeoPackage"</span>, </span>
<span>              folder <span class="op">=</span> <span class="st">"sample_gpkg"</span>, </span>
<span>              filename <span class="op">=</span> <span class="st">"test"</span>, </span>
<span>              overwrite <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>              command_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "cmd /c echo {\"request\":\"copytemplatefile\",\"templatename\":\"GeoPackage\",\"folder\":\"sample_gpkg\",\"filename\":\"test\",\"overwrite\":true} | \"C:\\PROGRA~1\\PYTHON~1\\python.exe\" \"C:\\Users\\Andrew.G.Brown\\AppData\\Roaming/R/data/R/SSURGOPortal/SSURGOPortal.pyz\" @"</span></span></code></pre></div>
<p>Now after inspecting the command, we can actually run it:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ssurgo_portal.html">ssurgo_portal</a></span><span class="op">(</span><span class="st">"copytemplate"</span>, </span>
<span>              templatename <span class="op">=</span> <span class="st">"GeoPackage"</span>, </span>
<span>              folder <span class="op">=</span> <span class="st">"sample_gpkg"</span>, </span>
<span>              filename <span class="op">=</span> <span class="st">"test"</span>, </span>
<span>              overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; $status</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $message</span></span>
<span><span class="co">#&gt; [1] "Copied templates/geopackage.gpkg to sample_gpkg\\test.gpkg"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $elapsedseconds</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="download-and-import-data">Download and Import Data<a class="anchor" aria-label="anchor" href="#download-and-import-data"></a>
</h2>
<p>Using the {soilDB} package SSURGO data for input into template databases can easily be downloaded. For example here we specify a generic <code>WHERE</code> clause used against the <code>sacatalog</code> table in Soil Data Access.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">td</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"ssurgo_test"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/download_ssurgo.html">download_ssurgo</a></span><span class="op">(</span><span class="st">"areasymbol LIKE 'RI%'"</span>, exdir <span class="op">=</span> <span class="va">td</span><span class="op">)</span></span></code></pre></div>
<p>In this instance the wildcard only returns a single survey, <code>"RI600"</code>, but this pattern could be used in other areas to download multiple surveys within a state (without explicitly knowing their <code>areasymbol</code>).</p>
<p>After downloading and extracting soil survey area data to a temporary directory, we can “pretest” them as candidates for import into the template.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ssurgo_portal.html">ssurgo_portal</a></span><span class="op">(</span></span>
<span>  <span class="st">"pretestimportcandidates"</span>,</span>
<span>  database <span class="op">=</span> <span class="st">"sample_gpkg/test.gpkg"</span>,</span>
<span>  root <span class="op">=</span> <span class="va">td</span>,</span>
<span>  istabularonly <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If everything looks good, we can go ahead with the import. For this we use the <code>"importcandidates"</code> request.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ssurgo_portal.html">ssurgo_portal</a></span><span class="op">(</span></span>
<span>  <span class="st">"importcandidates"</span>,</span>
<span>  database <span class="op">=</span> <span class="st">"sample_gpkg/test.gpkg"</span>,</span>
<span>  root <span class="op">=</span> <span class="va">td</span>,</span>
<span>  istabularonly <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  skippretest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  subfolders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RI600"</span><span class="op">)</span>,</span>
<span>  loadinspatialorder <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  loadspatialdatawithinsubprocess <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dissolvemupolygon <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="python-versions-supported">Python Versions Supported<a class="anchor" aria-label="anchor" href="#python-versions-supported"></a>
</h2>
<p>There are built in routines and binaries for running the tool on Windows with Python 3.9 or 3.10. If using a different version of Python you will need to be sure the required modules are installed prior to running <code><a href="reference/ssurgo_portal.html">ssurgo_portal()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="python-dependencies">Python Dependencies<a class="anchor" aria-label="anchor" href="#python-dependencies"></a>
</h2>
<p>To prepare your Python system or virtual environment, run <code>python -m pip install bottle gdal jsonschema</code> (or similar) to make sure that the required modules are already installed before invoking the SSURGO Portal tools.</p>
</div>
<div class="section level2">
<h2 id="cross-platform-support">Cross-platform Support<a class="anchor" aria-label="anchor" href="#cross-platform-support"></a>
</h2>
<p>This package applies patches to attempt to make the .PYZ contents minimally compatible with Linux and macOS. This feature is experimental and intended to provide feedback for future development. If these patches are not included the initialization routine will be triggered on non-Windows platforms.</p>
<p>This routine only installs the bundled Windows wheel (.whl) files; it should be expected to fail on all other platforms and Python versions other than 3.9 and 3.10.</p>
<p>If you encounter other problems on non-Windows platforms, file an issue in the <a href="https://github.com/brownag/SSSURGOPortalR/issues" class="external-link">issue tracker</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/brownag/SSURGOPortalR/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>CC0</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing SSURGOPortal</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Andrew Brown <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/brownag/SSURGOPortalR/actions/workflows/R-CMD-check.yml" class="external-link"><img src="https://github.com/brownag/SSURGOPortalR/actions/workflows/R-CMD-check.yml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Andrew Brown.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
